" vim:ft=vim

Execute(test-open_command):
  Log '# FloatermNew floaterm ../../LICENSE'
    let original_winid = win_getid()
    silent !touch test.txt
    FloatermNew floaterm test.txt
    sleep 1000m
    Log expand('%')
    Log &ft
    AssertEqual 'test.txt',expand('%:t')
    AssertNotEqual 'floaterm',&ft
    Assert win_getid() == original_winid

  Log '# FloatermNew cat ../../LICENSE | floaterm'
    FloatermNew cat test.txt | floaterm
    sleep 1000m
    AssertNotEqual 'floaterm',&ft
    Assert win_getid() == original_winid
    silent !rm test.txt

  FloatermKill!
  stopinsert
